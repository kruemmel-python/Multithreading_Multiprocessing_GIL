<!DOCTYPE html>

<html lang="de" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Program 2: Multithreading auf Mehrkernsystemen &#8212; Multithreading Multiprocessing (GIL) 1 Dokumentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=12dfc556" />
    <script src="_static/documentation_options.js?v=54d918e9"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/translations.js?v=70a09b52"></script>
    <link rel="index" title="Stichwortverzeichnis" href="genindex.html" />
    <link rel="search" title="Suche" href="search.html" />
    <link rel="next" title="Welcome to Multithreading und Multiprocessing’s (GIL) documentation!" href="readme.html" />
    <link rel="prev" title="Program 1: Multithreading und Multiprocessing" href="program1.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="program-2-multithreading-auf-mehrkernsystemen">
<h1>Program 2: Multithreading auf Mehrkernsystemen<a class="headerlink" href="#program-2-multithreading-auf-mehrkernsystemen" title="Link to this heading">¶</a></h1>
<p>Dies ist die Dokumentation der Datei <cite>Multithreading_Multiprocessing_Mehrkernsysteme.py</cite>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">  1</span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">  2</span><span class="sd">Multithreading und Multiprocessing mit separaten GUIs in Python 3.13</span>
<span class="linenos">  3</span><span class="sd">====================================================================</span>
<span class="linenos">  4</span>
<span class="linenos">  5</span><span class="sd">Dieses Modul zeigt, wie man Multithreading und Multiprocessing in Python 3.13 verwendet, </span>
<span class="linenos">  6</span><span class="sd">um zwei parallele GUIs zu erstellen, die miteinander über eine geteilte Ressource </span>
<span class="linenos">  7</span><span class="sd">(den Zähler) interagieren. Hierbei laufen die GUIs in separaten Prozessen und verwenden</span>
<span class="linenos">  8</span><span class="sd">einen gemeinsam genutzten Zähler über `multiprocessing.Value`.</span>
<span class="linenos">  9</span>
<span class="linenos"> 10</span><span class="sd">Fachliche Informationen:</span>
<span class="linenos"> 11</span><span class="sd">-------------------------</span>
<span class="linenos"> 12</span><span class="sd">- **Speicherverwaltung**: Beide GUIs laufen in separaten Prozessen, die jeweils ihren eigenen </span>
<span class="linenos"> 13</span><span class="sd">  Speicherbereich haben. Der Zähler wird jedoch als **shared memory** (gemeinsamer Speicher) </span>
<span class="linenos"> 14</span><span class="sd">  über das `multiprocessing.Value`-Objekt implementiert. Dies ermöglicht es den Prozessen,</span>
<span class="linenos"> 15</span><span class="sd">  sicher auf denselben Speicherbereich zuzugreifen. Um Datenkonflikte zu vermeiden, wird </span>
<span class="linenos"> 16</span><span class="sd">  ein Lock (`counter.get_lock()`) verwendet, um den Zugriff auf den Zähler zu synchronisieren.</span>
<span class="linenos"> 17</span>
<span class="linenos"> 18</span><span class="sd">- **CPU-Nutzung**: Da Prozesse voneinander getrennt sind, können sie auf verschiedenen **CPU-Kernen**</span>
<span class="linenos"> 19</span><span class="sd">  laufen, was eine bessere Nutzung der Ressourcen ermöglicht. Jeder GUI-Prozess läuft unabhängig </span>
<span class="linenos"> 20</span><span class="sd">  und teilt sich den gemeinsamen Zähler im Shared Memory. Python 3.13 optimiert den Umgang </span>
<span class="linenos"> 21</span><span class="sd">  mit dem GIL (Global Interpreter Lock), sodass Prozesse effizient parallel arbeiten können.</span>
<span class="linenos"> 22</span><span class="sd">  Innerhalb jedes Prozesses kann zusätzlich **Multithreading** verwendet werden, um die </span>
<span class="linenos"> 23</span><span class="sd">  Benutzeroberflächen reaktionsfähig zu halten, da sie auf mehrere Aufgaben gleichzeitig reagieren können.</span>
<span class="linenos"> 24</span>
<span class="linenos"> 25</span><span class="sd">- **Verwendung von Prozessen und Threads**: Zwei unabhängige Prozesse, einer für jedes GUI, greifen </span>
<span class="linenos"> 26</span><span class="sd">  auf denselben Zähler im Shared Memory zu. Die Prozesse laufen parallel und können mehrere Threads </span>
<span class="linenos"> 27</span><span class="sd">  innerhalb jedes Prozesses verwenden, um GUI-Aktivitäten und Hintergrundaufgaben zu parallelisieren.</span>
<span class="linenos"> 28</span>
<span class="linenos"> 29</span><span class="sd">Module:</span>
<span class="linenos"> 30</span><span class="sd">-------</span>
<span class="linenos"> 31</span><span class="sd">- `multiprocessing`: Erstellt separate Prozesse, die auf verschiedenen CPU-Kernen laufen können,</span>
<span class="linenos"> 32</span><span class="sd">  und ermöglicht den Zugriff auf gemeinsam genutzte Ressourcen (wie den Zähler).</span>
<span class="linenos"> 33</span><span class="sd">- `threading`: Führt mehrere Threads innerhalb eines Prozesses aus, um verschiedene GUI-Aufgaben parallel auszuführen.</span>
<span class="linenos"> 34</span>
<span class="linenos"> 35</span><span class="sd">Funktionen:</span>
<span class="linenos"> 36</span><span class="sd">-----------</span>
<span class="linenos"> 37</span><span class="sd">- `update_counter(increment)`: Erhöht oder verringert den Zähler, der von beiden GUIs geteilt wird. </span>
<span class="linenos"> 38</span><span class="sd">  Der Zugriff auf den Zähler wird über ein Lock geschützt, um Konflikte zu vermeiden.</span>
<span class="linenos"> 39</span><span class="sd">- `FirstGUI`: Erstellt das erste GUI, mit der Möglichkeit, den Zähler zu erhöhen oder zu verringern. </span>
<span class="linenos"> 40</span><span class="sd">  Die GUI zeigt den aktuellen Wert des Zählers an und aktualisiert diesen regelmäßig.</span>
<span class="linenos"> 41</span><span class="sd">- `SecondGUI`: Erstellt das zweite GUI, das den Zählerstand anzeigt und den Zähler auf 0 zurücksetzen kann. </span>
<span class="linenos"> 42</span><span class="sd">  Auch diese GUI aktualisiert den Zählerstand regelmäßig.</span>
<span class="linenos"> 43</span><span class="sd">- `start_first_gui()`: Startet das erste GUI in einem separaten Prozess und verwendet Threads, um die GUI reaktionsfähig zu halten.</span>
<span class="linenos"> 44</span><span class="sd">- `start_second_gui()`: Startet das zweite GUI in einem separaten Prozess und verwendet Threads für die GUI-Verwaltung.</span>
<span class="linenos"> 45</span><span class="sd">- `main`: Startet beide GUIs als separate Prozesse. Jeder Prozess greift auf den gemeinsam genutzten Zähler im Shared Memory zu und aktualisiert den Zähler regelmäßig.</span>
<span class="linenos"> 46</span>
<span class="linenos"> 47</span><span class="sd">Ablauf:</span>
<span class="linenos"> 48</span><span class="sd">-------</span>
<span class="linenos"> 49</span><span class="sd">1. Das Programm startet zwei unabhängige Prozesse, `process_1` und `process_2`, die jeweils ein GUI darstellen.</span>
<span class="linenos"> 50</span><span class="sd">2. Beide Prozesse greifen über `multiprocessing.Value` auf denselben Zähler im Shared Memory zu.</span>
<span class="linenos"> 51</span><span class="sd">3. Innerhalb jedes Prozesses werden Threads verwendet, um die GUI-Aktivitäten zu handhaben.</span>
<span class="linenos"> 52</span><span class="sd">4. Änderungen am Zähler (Erhöhen, Verringern oder Zurücksetzen) in einem GUI werden sofort im anderen GUI reflektiert, da beide GUIs den Zählerstand regelmäßig aus dem Shared Memory abfragen.</span>
<span class="linenos"> 53</span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos"> 54</span>
<span class="linenos"> 55</span><span class="kn">import</span> <span class="nn">tkinter</span> <span class="k">as</span> <span class="nn">tk</span>
<span class="linenos"> 56</span><span class="kn">import</span> <span class="nn">multiprocessing</span>
<span class="linenos"> 57</span>
<span class="linenos"> 58</span><span class="c1"># Gemeinsame Variable für beide GUIs (Zähler)</span>
<span class="linenos"> 59</span><span class="k">def</span> <span class="nf">update_counter</span><span class="p">(</span><span class="n">counter</span><span class="p">,</span> <span class="n">increment</span><span class="p">):</span>
<span class="linenos"> 60</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos"> 61</span><span class="sd">    Erhöht oder verringert den gemeinsamen Zählerwert sicher.</span>
<span class="linenos"> 62</span><span class="sd">    </span>
<span class="linenos"> 63</span><span class="sd">    Der Zugriff auf den Zähler wird über ein Lock synchronisiert, um sicherzustellen,</span>
<span class="linenos"> 64</span><span class="sd">    dass nur ein Prozess gleichzeitig den Wert ändern kann.</span>
<span class="linenos"> 65</span><span class="sd">    </span>
<span class="linenos"> 66</span><span class="sd">    Args:</span>
<span class="linenos"> 67</span><span class="sd">    -----</span>
<span class="linenos"> 68</span><span class="sd">    counter (multiprocessing.Value): Gemeinsame Zählervariable.</span>
<span class="linenos"> 69</span><span class="sd">    increment (int): Wert, um den der Zähler erhöht oder verringert werden soll.</span>
<span class="linenos"> 70</span>
<span class="linenos"> 71</span><span class="sd">    Beispiel:</span>
<span class="linenos"> 72</span><span class="sd">    ---------</span>
<span class="linenos"> 73</span><span class="sd">    &gt;&gt;&gt; update_counter(counter, 1)</span>
<span class="linenos"> 74</span><span class="sd">    Erhöht den Zähler um 1.</span>
<span class="linenos"> 75</span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos"> 76</span>    <span class="k">with</span> <span class="n">counter</span><span class="o">.</span><span class="n">get_lock</span><span class="p">():</span>
<span class="linenos"> 77</span>        <span class="n">counter</span><span class="o">.</span><span class="n">value</span> <span class="o">+=</span> <span class="n">increment</span>
<span class="linenos"> 78</span>
<span class="linenos"> 79</span><span class="k">class</span> <span class="nc">FirstGUI</span><span class="p">:</span>
<span class="linenos"> 80</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos"> 81</span><span class="sd">    Erstellt das erste GUI, das den gemeinsamen Zähler anzeigen und ändern kann.</span>
<span class="linenos"> 82</span><span class="sd">    </span>
<span class="linenos"> 83</span><span class="sd">    Dieses GUI hat zwei Buttons, um den Zähler zu erhöhen oder zu verringern. </span>
<span class="linenos"> 84</span><span class="sd">    Die Anzeige wird regelmäßig aktualisiert, um den aktuellen Wert des Zählers anzuzeigen, </span>
<span class="linenos"> 85</span><span class="sd">    der von beiden GUIs geteilt wird.</span>
<span class="linenos"> 86</span>
<span class="linenos"> 87</span><span class="sd">    Speichereffizienz:</span>
<span class="linenos"> 88</span><span class="sd">    -------------------</span>
<span class="linenos"> 89</span><span class="sd">    Da die GUIs in separaten Prozessen laufen, haben sie voneinander getrennte Speicherbereiche. </span>
<span class="linenos"> 90</span><span class="sd">    Der Zähler wird jedoch über den **shared memory** (`multiprocessing.Value`) gemeinsam genutzt und </span>
<span class="linenos"> 91</span><span class="sd">    über ein Lock synchronisiert, um Konflikte zu verhindern.</span>
<span class="linenos"> 92</span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos"> 93</span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">master</span><span class="p">,</span> <span class="n">counter</span><span class="p">):</span>
<span class="linenos"> 94</span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos"> 95</span><span class="sd">        Initialisiert das GUI und erstellt die GUI-Elemente (Label, Buttons).</span>
<span class="linenos"> 96</span><span class="sd">        </span>
<span class="linenos"> 97</span><span class="sd">        Args:</span>
<span class="linenos"> 98</span><span class="sd">        -----</span>
<span class="linenos"> 99</span><span class="sd">        master: Das Hauptfenster für das GUI.</span>
<span class="linenos">100</span><span class="sd">        counter: Der gemeinsam genutzte Zähler im Shared Memory.</span>
<span class="linenos">101</span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos">102</span>        <span class="bp">self</span><span class="o">.</span><span class="n">master</span> <span class="o">=</span> <span class="n">master</span>
<span class="linenos">103</span>        <span class="bp">self</span><span class="o">.</span><span class="n">counter</span> <span class="o">=</span> <span class="n">counter</span>
<span class="linenos">104</span>        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Erstes GUI&quot;</span><span class="p">)</span>
<span class="linenos">105</span>
<span class="linenos">106</span>        <span class="c1"># Fenstergröße auf 300x200 Pixel setzen und die Position festlegen (links oben)</span>
<span class="linenos">107</span>        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">geometry</span><span class="p">(</span><span class="s2">&quot;300x200+500+200&quot;</span><span class="p">)</span>
<span class="linenos">108</span>        
<span class="linenos">109</span>        <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">master</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Zählerstand: 0&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
<span class="linenos">110</span>        <span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
<span class="linenos">111</span>
<span class="linenos">112</span>        <span class="bp">self</span><span class="o">.</span><span class="n">increment_button</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">master</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Zähler erhöhen&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">increment_counter</span><span class="p">)</span>
<span class="linenos">113</span>        <span class="bp">self</span><span class="o">.</span><span class="n">increment_button</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
<span class="linenos">114</span>
<span class="linenos">115</span>        <span class="bp">self</span><span class="o">.</span><span class="n">decrement_button</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">master</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Zähler verringern&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">decrement_counter</span><span class="p">)</span>
<span class="linenos">116</span>        <span class="bp">self</span><span class="o">.</span><span class="n">decrement_button</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
<span class="linenos">117</span>
<span class="linenos">118</span>        <span class="c1"># Aktualisierung der Anzeige alle 100 ms</span>
<span class="linenos">119</span>        <span class="bp">self</span><span class="o">.</span><span class="n">update_display</span><span class="p">()</span>
<span class="linenos">120</span>
<span class="linenos">121</span>    <span class="k">def</span> <span class="nf">increment_counter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">122</span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Erhöht den Zähler um 1.&quot;&quot;&quot;</span>
<span class="linenos">123</span>        <span class="n">update_counter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">counter</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="linenos">124</span>
<span class="linenos">125</span>    <span class="k">def</span> <span class="nf">decrement_counter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">126</span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Verringert den Zähler um 1.&quot;&quot;&quot;</span>
<span class="linenos">127</span>        <span class="n">update_counter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">counter</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="linenos">128</span>
<span class="linenos">129</span>    <span class="k">def</span> <span class="nf">update_display</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">130</span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Aktualisiert die Zähleranzeige im GUI, um den aktuellen Wert anzuzeigen.&quot;&quot;&quot;</span>
<span class="linenos">131</span>        <span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Zählerstand: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">counter</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="linenos">132</span>        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">update_display</span><span class="p">)</span>  <span class="c1"># Aktualisiere alle 100 ms</span>
<span class="linenos">133</span>
<span class="linenos">134</span><span class="k">class</span> <span class="nc">SecondGUI</span><span class="p">:</span>
<span class="linenos">135</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">136</span><span class="sd">    Erstellt das zweite GUI, das den gemeinsamen Zähler anzeigen und zurücksetzen kann.</span>
<span class="linenos">137</span><span class="sd">    </span>
<span class="linenos">138</span><span class="sd">    Dieses GUI zeigt den aktuellen Zählerstand an und bietet eine Schaltfläche, um </span>
<span class="linenos">139</span><span class="sd">    den Zähler auf 0 zurückzusetzen. Die Anzeige wird regelmäßig aktualisiert.</span>
<span class="linenos">140</span>
<span class="linenos">141</span><span class="sd">    Prozessorverwaltung:</span>
<span class="linenos">142</span><span class="sd">    ---------------------</span>
<span class="linenos">143</span><span class="sd">    Jeder GUI-Prozess läuft auf einem separaten CPU-Kern (falls verfügbar). </span>
<span class="linenos">144</span><span class="sd">    Beide GUIs verwenden den gleichen Zähler im Shared Memory.</span>
<span class="linenos">145</span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos">146</span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">master</span><span class="p">,</span> <span class="n">counter</span><span class="p">):</span>
<span class="linenos">147</span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">148</span><span class="sd">        Initialisiert das zweite GUI und erstellt die GUI-Elemente (Label, Button).</span>
<span class="linenos">149</span><span class="sd">        </span>
<span class="linenos">150</span><span class="sd">        Args:</span>
<span class="linenos">151</span><span class="sd">        -----</span>
<span class="linenos">152</span><span class="sd">        master: Das Hauptfenster für das GUI.</span>
<span class="linenos">153</span><span class="sd">        counter: Der gemeinsam genutzte Zähler im Shared Memory.</span>
<span class="linenos">154</span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos">155</span>        <span class="bp">self</span><span class="o">.</span><span class="n">master</span> <span class="o">=</span> <span class="n">master</span>
<span class="linenos">156</span>        <span class="bp">self</span><span class="o">.</span><span class="n">counter</span> <span class="o">=</span> <span class="n">counter</span>
<span class="linenos">157</span>        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Zweites GUI&quot;</span><span class="p">)</span>
<span class="linenos">158</span>
<span class="linenos">159</span>        <span class="c1"># Fenstergröße auf 300x200 Pixel setzen und Position unter dem ersten GUI festlegen</span>
<span class="linenos">160</span>        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">geometry</span><span class="p">(</span><span class="s2">&quot;300x200+500+400&quot;</span><span class="p">)</span>
<span class="linenos">161</span>
<span class="linenos">162</span>        <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">master</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Live-Zählerstand: 0&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
<span class="linenos">163</span>        <span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
<span class="linenos">164</span>
<span class="linenos">165</span>        <span class="bp">self</span><span class="o">.</span><span class="n">reset_button</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">master</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Zähler zurücksetzen&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">reset_counter</span><span class="p">)</span>
<span class="linenos">166</span>        <span class="bp">self</span><span class="o">.</span><span class="n">reset_button</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
<span class="linenos">167</span>
<span class="linenos">168</span>        <span class="c1"># Aktualisierung der Anzeige alle 100 ms</span>
<span class="linenos">169</span>        <span class="bp">self</span><span class="o">.</span><span class="n">update_display</span><span class="p">()</span>
<span class="linenos">170</span>
<span class="linenos">171</span>    <span class="k">def</span> <span class="nf">reset_counter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">172</span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Setzt den Zähler auf 0 zurück.&quot;&quot;&quot;</span>
<span class="linenos">173</span>        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">counter</span><span class="o">.</span><span class="n">get_lock</span><span class="p">():</span>
<span class="linenos">174</span>            <span class="bp">self</span><span class="o">.</span><span class="n">counter</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos">175</span>
<span class="linenos">176</span>    <span class="k">def</span> <span class="nf">update_display</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">177</span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Aktualisiert die Zähleranzeige im GUI, um den aktuellen Wert anzuzeigen.&quot;&quot;&quot;</span>
<span class="linenos">178</span>        <span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Live-Zählerstand: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">counter</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="linenos">179</span>        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">update_display</span><span class="p">)</span>  <span class="c1"># Aktualisiere alle 100 ms</span>
<span class="linenos">180</span>
<span class="linenos">181</span><span class="k">def</span> <span class="nf">start_first_gui</span><span class="p">(</span><span class="n">counter</span><span class="p">):</span>
<span class="linenos">182</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;Startet das erste GUI in einem separaten Prozess.&quot;&quot;&quot;</span>
<span class="linenos">183</span>    <span class="n">root</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Tk</span><span class="p">()</span>
<span class="linenos">184</span>    <span class="n">app</span> <span class="o">=</span> <span class="n">FirstGUI</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">counter</span><span class="p">)</span>
<span class="linenos">185</span>    <span class="n">root</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
<span class="linenos">186</span>
<span class="linenos">187</span><span class="k">def</span> <span class="nf">start_second_gui</span><span class="p">(</span><span class="n">counter</span><span class="p">):</span>
<span class="linenos">188</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;Startet das zweite GUI in einem separaten Prozess.&quot;&quot;&quot;</span>
<span class="linenos">189</span>    <span class="n">root</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Tk</span><span class="p">()</span>
<span class="linenos">190</span>    <span class="n">app</span> <span class="o">=</span> <span class="n">SecondGUI</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">counter</span><span class="p">)</span>
<span class="linenos">191</span>    <span class="n">root</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
<span class="linenos">192</span>
<span class="linenos">193</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<span class="linenos">194</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">195</span><span class="sd">    Hauptfunktion des Programms.</span>
<span class="linenos">196</span><span class="sd">    </span>
<span class="linenos">197</span><span class="sd">    Startet zwei Prozesse, die jeweils ein GUI darstellen. Beide Prozesse verwenden denselben Zähler,</span>
<span class="linenos">198</span><span class="sd">    der über Shared Memory geteilt wird. Änderungen im Zähler werden zwischen den GUIs synchronisiert.</span>
<span class="linenos">199</span>
<span class="linenos">200</span><span class="sd">    CPU-Auslastung:</span>
<span class="linenos">201</span><span class="sd">    ----------------</span>
<span class="linenos">202</span><span class="sd">    Beide Prozesse können auf unterschiedlichen CPU-Kernen laufen, wodurch die Ressourcen effizient genutzt werden.</span>
<span class="linenos">203</span><span class="sd">    Der Zähler wird zwischen den Prozessen im Shared Memory geteilt und regelmäßig in den GUIs aktualisiert.</span>
<span class="linenos">204</span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos">205</span>    <span class="c1"># Erstellen einer gemeinsamen Zählervariable im Shared Memory</span>
<span class="linenos">206</span>    <span class="n">counter</span> <span class="o">=</span> <span class="n">multiprocessing</span><span class="o">.</span><span class="n">Value</span><span class="p">(</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>  <span class="c1"># Ein Integer-Wert (&#39;i&#39;) im Shared Memory</span>
<span class="linenos">207</span>
<span class="linenos">208</span>    <span class="c1"># Starten der beiden Prozesse</span>
<span class="linenos">209</span>    <span class="n">process_1</span> <span class="o">=</span> <span class="n">multiprocessing</span><span class="o">.</span><span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">start_first_gui</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">counter</span><span class="p">,))</span>
<span class="linenos">210</span>    <span class="n">process_2</span> <span class="o">=</span> <span class="n">multiprocessing</span><span class="o">.</span><span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">start_second_gui</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">counter</span><span class="p">,))</span>
<span class="linenos">211</span>
<span class="linenos">212</span>    <span class="n">process_1</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="linenos">213</span>    <span class="n">process_2</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="linenos">214</span>
<span class="linenos">215</span>    <span class="c1"># Warten auf das Ende beider Prozesse</span>
<span class="linenos">216</span>    <span class="n">process_1</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
<span class="linenos">217</span>    <span class="n">process_2</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
<span class="linenos">218</span>
<span class="linenos">219</span>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Beide GUIs wurden beendet.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Multithreading Multiprocessing (GIL)</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Inhaltsverzeichnis:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="program1.html">Program 1: Multithreading und Multiprocessing</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Program 2: Multithreading auf Mehrkernsystemen</a></li>
<li class="toctree-l1"><a class="reference internal" href="readme.html">Welcome to Multithreading und Multiprocessing’s (GIL) documentation!</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="program1.html" title="vorheriges Kapitel">Program 1: Multithreading und Multiprocessing</a></li>
      <li>Next: <a href="readme.html" title="nächstes Kapitel">Welcome to Multithreading und Multiprocessing’s (GIL) documentation!</a></li>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Schnellsuche</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Los" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2024, Ralf Krümmel.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.3.7</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="_sources/program2.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>